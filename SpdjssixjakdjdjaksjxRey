--// SIMPLE STABLE GUI (FIXED)
if not game:IsLoaded() then game.Loaded:Wait() end

pcall(function()
    game.CoreGui:FindFirstChild("ReyGui"):Destroy()
end)

local UIS = game:GetService("UserInputService")

-- GUI
local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "ReyGui"
gui.ResetOnSpawn = false

local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0, 420, 0, 280)
main.Position = UDim2.new(0.5, -210, 0.5, -140)
main.BackgroundColor3 = Color3.fromRGB(25,25,25)
main.BorderSizePixel = 0

-- CORNER
local corner = Instance.new("UICorner", main)
corner.CornerRadius = UDim.new(0, 12)

-- TOP BAR
local top = Instance.new("Frame", main)
top.Size = UDim2.new(1,0,0,40)
top.BackgroundColor3 = Color3.fromRGB(35,35,35)

local title = Instance.new("TextLabel", top)
title.Size = UDim2.new(1, -40, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.Text = "ðŸ”¥ Rey Script Hub"
title.TextColor3 = Color3.new(1,1,1)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.TextXAlignment = Left

-- MINIMIZE
local minimize = Instance.new("TextButton", top)
minimize.Size = UDim2.new(0, 30, 0, 30)
minimize.Position = UDim2.new(1, -35, 0, 5)
minimize.Text = "-"
minimize.Font = Enum.Font.GothamBold
minimize.TextSize = 20
minimize.BackgroundColor3 = Color3.fromRGB(60,60,60)
minimize.TextColor3 = Color3.new(1,1,1)

-- CONTENT
local content = Instance.new("Frame", main)
content.Position = UDim2.new(0,0,0,40)
content.Size = UDim2.new(1,0,1,-40)
content.BackgroundTransparency = 1

-- STATUS
local status = Instance.new("TextLabel", content)
status.Position = UDim2.new(0, 20, 0, 20)
status.Size = UDim2.new(1, -40, 0, 30)
status.Text = "Status: OFF"
status.TextColor3 = Color3.fromRGB(200,200,200)
status.Font = Enum.Font.Gotham
status.TextSize = 16
status.BackgroundTransparency = 1

-- TOGGLE BUTTON
local toggle = Instance.new("TextButton", content)
toggle.Position = UDim2.new(0, 20, 0, 70)
toggle.Size = UDim2.new(0, 200, 0, 40)
toggle.Text = "TURN ON"
toggle.BackgroundColor3 = Color3.fromRGB(60,60,60)
toggle.TextColor3 = Color3.new(1,1,1)
toggle.Font = Enum.Font.GothamBold
toggle.TextSize = 16

local on = false

toggle.MouseButton1Click:Connect(function()
    on = not on
    if on then
        toggle.Text = "TURN OFF"
        toggle.BackgroundColor3 = Color3.fromRGB(0,170,100)
        status.Text = "Status: ON"
    else
        toggle.Text = "TURN ON"
        toggle.BackgroundColor3 = Color3.fromRGB(60,60,60)
        status.Text = "Status: OFF"
    end
end)

-- DRAG SYSTEM (WORKING)
local dragging = false
local dragStart, startPos

top.InputBegan:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = i.Position
        startPos = main.Position
    end
end)

UIS.InputChanged:Connect(function(i)
    if dragging and i.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = i.Position - dragStart
        main.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

UIS.InputEnded:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- MINIMIZE
local minimized = false
minimize.MouseButton1Click:Connect(function()
    minimized = not minimized
    content.Visible = not minimized
end)

print("âœ… GUI Loaded Successfully")
