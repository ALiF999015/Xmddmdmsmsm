--// Rey Ultimate GUI (Glow + Toggle + Save Pos)
if not game:IsLoaded() then
    game.Loaded:Wait()
end

pcall(function()
    game.CoreGui:FindFirstChild("ReyGui"):Destroy()
end)

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")

local SAVE_FILE = "ReyGuiPos.json"

-- Load saved position
local savedPos
pcall(function()
    if isfile(SAVE_FILE) then
        savedPos = HttpService:JSONDecode(readfile(SAVE_FILE))
    end
end)

-- GUI SETUP
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ReyGui"
ScreenGui.Parent = game.CoreGui
ScreenGui.ResetOnSpawn = false

local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.new(0, 420, 0, 360)
Main.Position = savedPos and UDim2.new(0, savedPos.X, 0, savedPos.Y) or UDim2.new(0.5, -210, 0.5, -180)
Main.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Main.BorderSizePixel = 0

-- GLOW EFFECT
local Glow = Instance.new("UIStroke", Main)
Glow.Thickness = 2
Glow.Color = Color3.fromRGB(0, 170, 255)
Glow.Transparency = 0.2

local Corner = Instance.new("UICorner", Main)
Corner.CornerRadius = UDim.new(0, 12)

-- TOP BAR
local Top = Instance.new("Frame", Main)
Top.Size = UDim2.new(1, 0, 0, 40)
Top.BackgroundColor3 = Color3.fromRGB(30, 30, 30)

local Title = Instance.new("TextLabel", Top)
Title.Size = UDim2.new(1, -80, 1, 0)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.Text = "ðŸŽ£ Fish World - Ultimate Hub"
Title.TextColor3 = Color3.fromRGB(255,255,255)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.GothamBold
Title.TextSize = 16
Title.TextXAlignment = Left

-- MINIMIZE BUTTON
local MinBtn = Instance.new("TextButton", Top)
MinBtn.Size = UDim2.new(0, 35, 0, 30)
MinBtn.Position = UDim2.new(1, -40, 0, 5)
MinBtn.Text = "-"
MinBtn.Font = Enum.Font.GothamBold
MinBtn.TextSize = 22
MinBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
MinBtn.TextColor3 = Color3.new(1,1,1)

-- CONTENT
local Content = Instance.new("Frame", Main)
Content.Position = UDim2.new(0, 0, 0, 40)
Content.Size = UDim2.new(1, 0, 1, -40)
Content.BackgroundTransparency = 1

-- DRAG
local dragging, dragStart, startPos
Top.InputBegan:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = i.Position
        startPos = Main.Position
    end
end)

UIS.InputChanged:Connect(function(i)
    if dragging and i.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = i.Position - dragStart
        Main.Position = UDim2.new(0, startPos.X.Offset + delta.X, 0, startPos.Y.Offset + delta.Y)
    end
end)

UIS.InputEnded:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
        writefile(SAVE_FILE, HttpService:JSONEncode({
            X = Main.Position.X.Offset,
            Y = Main.Position.Y.Offset
        }))
    end
end)

-- TOGGLE SYSTEM
local isOn = false

local ToggleBtn = Instance.new("TextButton", Content)
ToggleBtn.Size = UDim2.new(0, 200, 0, 45)
ToggleBtn.Position = UDim2.new(0, 20, 0, 30)
ToggleBtn.Text = "ðŸ”´ OFF"
ToggleBtn.BackgroundColor3 = Color3.fromRGB(50,50,50)
ToggleBtn.TextColor3 = Color3.new(1,1,1)
ToggleBtn.Font = Enum.Font.GothamBold
ToggleBtn.TextSize = 18

local ToggleCorner = Instance.new("UICorner", ToggleBtn)
ToggleCorner.CornerRadius = UDim.new(0, 8)

ToggleBtn.MouseButton1Click:Connect(function()
    isOn = not isOn
    if isOn then
        ToggleBtn.Text = "ðŸŸ¢ ON"
        ToggleBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 100)
    else
        ToggleBtn.Text = "ðŸ”´ OFF"
        ToggleBtn.BackgroundColor3 = Color3.fromRGB(50,50,50)
    end
end)

-- STATUS
local Status = Instance.new("TextLabel", Content)
Status.Position = UDim2.new(0, 20, 0, 90)
Status.Size = UDim2.new(1, -40, 0, 30)
Status.Text = "Status: Idle"
Status.TextColor3 = Color3.fromRGB(200,200,200)
Status.BackgroundTransparency = 1
Status.Font = Enum.Font.Gotham
Status.TextSize = 14

-- AUTO UPDATE STATUS
task.spawn(function()
    while true do
        if isOn then
            Status.Text = "Status: ACTIVE"
        else
            Status.Text = "Status: OFF"
        end
        task.wait(0.3)
    end
end)

print("ðŸ”¥ Rey Ultimate GUI Loaded Successfully")
